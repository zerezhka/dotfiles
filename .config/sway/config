set $mod Mod4

font pango:Iosevka 10

floating_modifier $mod

seat seat0 xcursor_theme default

input type:keyboard {
    xkb_layout us,ru
    xkb_options grp:alt_shift_toggle
}

input "1739:52543:SYNA7DA1:00_06CB:CD3F_Touchpad" {
    tap enabled
    tap_button_map lrm
    natural_scroll enabled
    dwt enabled
    dwtp enabled
    click_method button_areas
    scroll_method two_finger
    middle_emulation disabled
    drag_lock disabled
}

# Update systemd and dbus environment for apps launched via systemd or dbus
exec dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway BROWSER=chromium PATH GTK_THEME
exec systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP BROWSER PATH GTK_THEME

exec_always sh -c 'pkill swaybg; sleep 0.2; swaybg -m fill -i /usr/share/backgrounds/xfce/red_moon_penger.jpg'

# GTK theme for proper app backgrounds
set $gnome-schema org.gnome.desktop.interface
exec_always {
    gsettings set $gnome-schema gtk-theme 'Arc-Dark'
}

# Set GTK theme environment variable
exec_always export GTK_THEME=Arc-Dark

bindsym $mod+Return exec alacritty

bindsym --to-code $mod+Shift+q kill

bindsym --to-code $mod+d exec rofi -show drun

bindsym $mod+Shift+s exec sh -c 'geometry=$(slurp) && grim -g "$geometry" - | wl-copy --type image/png && notify-send "Screenshot saved to clipboard"'
bindsym Print exec sh -c 'grim - | wl-copy --type image/png && notify-send "Screenshot saved to clipboard"'

bindsym --to-code $mod+j focus left
bindsym --to-code $mod+k focus down
bindsym --to-code $mod+l focus up
bindsym --to-code $mod+semicolon focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

bindsym --to-code $mod+Shift+j move left
bindsym --to-code $mod+Shift+k move down
bindsym --to-code $mod+Shift+semicolon move right

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

bindsym --to-code $mod+h split h

bindsym --to-code $mod+v split v

bindsym --to-code $mod+f fullscreen toggle

bindsym --to-code $mod+w layout tabbed
bindsym --to-code $mod+e layout toggle split

bindsym $mod+Shift+space floating toggle

bindsym $mod+space focus mode_toggle

bindsym --to-code $mod+a focus parent

bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

bindsym $mod+Shift+1 move container to workspace 1; workspace 1
bindsym $mod+Shift+2 move container to workspace 2; workspace 2
bindsym $mod+Shift+3 move container to workspace 3; workspace 3
bindsym $mod+Shift+4 move container to workspace 4; workspace 4
bindsym $mod+Shift+5 move container to workspace 5; workspace 5
bindsym $mod+Shift+6 move container to workspace 6; workspace 6
bindsym $mod+Shift+7 move container to workspace 7; workspace 7
bindsym $mod+Shift+8 move container to workspace 8; workspace 8
bindsym $mod+Shift+9 move container to workspace 9; workspace 9
bindsym $mod+Shift+0 move container to workspace 10; workspace 10

bindsym --to-code $mod+Shift+c reload

bindsym --to-code $mod+Shift+r reload

bindsym --to-code $mod+Shift+e exec "~/.config/sway/scripts/dmenu-logout.sh"

mode "resize" {
    bindsym --to-code j resize shrink width 10 px or 10 ppt
    bindsym --to-code k resize grow height 10 px or 10 ppt
    bindsym --to-code l resize shrink height 10 px or 10 ppt
    bindsym --to-code semicolon resize grow width 10 px or 10 ppt

    bindsym Left resize shrink width 10 px or 10 ppt
    bindsym Down resize grow height 10 px or 10 ppt
    bindsym Up resize shrink height 10 px or 10 ppt
    bindsym Right resize grow width 10 px or 10 ppt

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym --to-code $mod+r mode "resize"

bar {
    position top
    font pango:Iosevka 12
    status_command i3status-rs ~/.config/i3status-rust/config-sway.toml

    colors {
        background #1e1e1e
        statusline #d4d4d4
        separator #666666

        focused_workspace  #0e639c #0e639c #ffffff
        active_workspace   #333333 #5f676a #ffffff
        inactive_workspace #1e1e1e #1e1e1e #888888
        urgent_workspace   #cc241d #cc241d #ffffff
    }
}

bindsym $mod+Shift+l exec swaylock

exec swayidle -w \
    timeout 300 "$HOME/.local/bin/flux-desktop" \
    timeout 600 swaylock \
    timeout 900 'swaymsg "output * dpms off"' \
    resume 'pkill -9 flux-desktop; swaymsg "output * dpms on"' \
    before-sleep 'pkill -9 flux-desktop; swaylock'

focus_follows_mouse no

hide_edge_borders both

# Window colors
# class                 border  backgr. text    indicator child_border
client.focused          #094560 #094560 #d4d4d4 #0e639c   #094560
client.focused_inactive #1e1e1e #1e1e1e #888888 #1e1e1e   #1e1e1e
client.unfocused        #1e1e1e #1e1e1e #666666 #1e1e1e   #1e1e1e
client.urgent           #cc241d #cc241d #ffffff #cc241d   #cc241d
client.background       #1e1e1e

# Floating windows
for_window [app_id="pavucontrol"] floating enable, resize set 600 400, move position cursor, move up 200px, move left 300px

# Flux screensaver fullscreen
for_window [title="Flux"] fullscreen enable

exec dunst

bindsym XF86MonBrightnessUp exec ~/.config/sway/scripts/show_notification.sh brightness +10%
bindsym XF86MonBrightnessDown exec ~/.config/sway/scripts/show_notification.sh brightness 10%-

bindsym XF86AudioRaiseVolume exec ~/.config/sway/scripts/show_notification.sh volume +5%
bindsym XF86AudioLowerVolume exec ~/.config/sway/scripts/show_notification.sh volume -5%
bindsym XF86AudioMute exec ~/.config/sway/scripts/show_notification.sh volume --toggle

bindsym XF86TouchpadToggle exec ~/.config/sway/scripts/toggle_touchpad.sh
bindsym XF86TouchpadOn exec swaymsg input type:touchpad events enabled && dunstify -r 7777 -a "Touchpad" -u low -t 2000 "󰍽 Touchpad" "Enabled"
bindsym XF86TouchpadOff exec swaymsg input type:touchpad events disabled && dunstify -r 7777 -a "Touchpad" -u low -t 2000 "󰟸 Touchpad" "Disabled"

